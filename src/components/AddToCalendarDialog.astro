---
import Calendar from '@/icons/Calendar.svg'
import Google from '@/icons/GoogleSmallLogo.svg'
import Outlook from '@/icons/OutlookLogo.svg'
const calendarTitle = encodeURIComponent('JSConf EspaÃ±a 2026')
const calendarStartDate = '20260314'
const calendarEndDate = '20260315'
const calendarLocation = encodeURIComponent(
  'La Nave, C. Cifuentes, 5, Villaverde, 28021 Madrid, EspaÃ±a'
)
const calendarBody = encodeURIComponent(
  'Â¡Ãšnete a JSConf EspaÃ±a 2026!\nğŸ“… Fecha: 14 de marzo de 2026\nğŸ“ Lugar: La Nave, C. Cifuentes, 5, Villaverde, 28021 Madrid, EspaÃ±a\n\nÂ¿Listo para sumergirte en el futuro de JavaScript? ğŸš€ JSConf EspaÃ±a es el evento imperdible para desarrolladores, entusiastas y profesionales que viven y respiran JavaScript.\n\nâœ¨ Â¿QuÃ© te espera?\n\n\tğŸŒ Charlas inspiradoras: Aprende de los lÃ­deres de la industria y de las mentes mÃ¡s brillantes del ecosistema JavaScript.\n\tğŸ¤ Networking: Conecta con una comunidad vibrante de desarrolladores, comparte ideas y encuentra nuevas oportunidades.\n\tğŸ‰ Actividades especiales: Talleres, paneles y, por supuesto, Â¡momentos para divertirse!\n\nYa seas un principiante o un experto, JSConf EspaÃ±a tiene algo para ti. No te pierdas la oportunidad de expandir tus habilidades, descubrir las Ãºltimas tendencias y ser parte de una comunidad que estÃ¡ transformando la web.\n\nğŸ”— Reserva tu entrada ahora: https://www.jsconf.es/\n\nÂ¡Nos vemos allÃ­!'
)
const calendars = [
  {
    name: 'Google',
    url: `https://calendar.google.com/calendar/render?action=TEMPLATE&dates=${calendarStartDate}%2F${calendarEndDate}&details=${calendarBody}&location=${calendarLocation}&text=${calendarTitle}`,
    icon: Google,
  },
  {
    name: 'Outlook',
    url: `https://outlook.live.com/calendar/0/action/compose?allday=true&body=${calendarBody}&enddt=2026-03-15T01%3A00%3A00&location=${calendarLocation}&path=%2Fcalendar%2Faction%2Fcompose&rru=addevent&startdt=2026-03-14T01%3A00%3A00&subject=${calendarTitle}`,
    icon: Outlook,
  },
  {
    name: 'Fichero .ics',
    url: '/jsconfes.ics',
    icon: Calendar,
  },
]
---

<div class="group relative flex flex-col">
  <button
    class="inline-flex items-center justify-center gap-2 px-5 py-2.5 font-bold uppercase tracking-wide text-xs bg-js-yellow text-js-black border-2 border-js-yellow rounded hover:bg-transparent hover:text-js-yellow transition-all cursor-pointer shadow-[0_0_10px_rgba(247,223,30,0.2)] hover:shadow-[0_0_20px_rgba(247,223,30,0.4)] relative"
    id="add-to-calendar"
  >
    <Calendar class="size-4" />
    AÃ±adir al calendario
  </button>
  <div
    class="hidden absolute z-50 top-[calc(100%-5px)] right-0 md:left-0 group-hover:flex group-focus-within:flex flex-col w-56 animate-in fade-in duration-200"
    id="calendar-dialog"
  >
    <div class="h-2 w-full"></div>
    <!-- Bridge to prevent mouse leave -->
    <div
      class="flex flex-col overflow-hidden rounded-lg bg-[#1a1a1a] border border-white/10 shadow-2xl"
    >
      <div class="p-2 border-b border-white/5 bg-white/5">
        <span class="text-[10px] font-bold text-white/40 uppercase tracking-widest px-2"
          >Selecciona plataforma</span
        >
      </div>
      {
        calendars.map(({ name, url, icon: Icon }) => (
          <a
            href={url}
            class="flex flex-row justify-start items-center gap-x-3 py-3 px-4 text-sm text-gray-300 hover:text-js-yellow hover:bg-white/10 transition-all border-b border-white/5 last:border-0 bg-[#1a1a1a]"
            target="_blank"
            rel="noopener noreferrer"
          >
            <Icon class="size-4" />
            {name}
          </a>
        ))
      }
    </div>
  </div>
</div>
