---
import Button from '@/components/Button.astro'
import Calendar from '@/icons/Calendar.svg'
import Google from '@/icons/GoogleSmallLogo.svg'
import Outlook from '@/icons/OutlookLogo.svg'
const calendarTitle = encodeURIComponent('JSConf EspaÃ±a 2025')
const calendarStartDate = '20250301'
const calendarEndDate = '20250302'
const calendarLocation = encodeURIComponent(
  'La Nave, C. Cifuentes, 5, Villaverde, 28021 Madrid, EspaÃ±a'
)
const calendarBody = encodeURIComponent(
  'Â¡Ãšnete a JSConf EspaÃ±a 2025!\nğŸ“… Fecha: 1 de marzo de 2025\nğŸ“ Lugar: La Nave, C. Cifuentes, 5, Villaverde, 28021 Madrid, EspaÃ±a\n\nÂ¿Listo para sumergirte en el futuro de JavaScript? ğŸš€ JSConf EspaÃ±a es el evento imperdible para desarrolladores, entusiastas y profesionales que viven y respiran JavaScript.\n\nâœ¨ Â¿QuÃ© te espera?\n\n\tğŸŒ Charlas inspiradoras: Aprende de los lÃ­deres de la industria y de las mentes mÃ¡s brillantes del ecosistema JavaScript.\n\tğŸ¤ Networking: Conecta con una comunidad vibrante de desarrolladores, comparte ideas y encuentra nuevas oportunidades.\n\tğŸ‰ Actividades especiales: Talleres, paneles y, por supuesto, Â¡momentos para divertirse!\n\nYa seas un principiante o un experto, JSConf EspaÃ±a tiene algo para ti. No te pierdas la oportunidad de expandir tus habilidades, descubrir las Ãºltimas tendencias y ser parte de una comunidad que estÃ¡ transformando la web.\n\nğŸ”— Reserva tu entrada ahora: https://www.jsconf.es/\n\nÂ¡Nos vemos allÃ­!'
)
const calendars = [
  {
    name: 'Google',
    url: `https://calendar.google.com/calendar/render?action=TEMPLATE&dates=${calendarStartDate}%2F${calendarEndDate}&details=${calendarBody}&location=${calendarLocation}&text=${calendarTitle}`,
    icon: Google,
  },
  {
    name: 'Outlook',
    url: `https://outlook.live.com/calendar/0/action/compose?allday=true&body=${calendarBody}&enddt=2025-03-02T01%3A00%3A00&location=${calendarLocation}&path=%2Fcalendar%2Faction%2Fcompose&rru=addevent&startdt=2025-03-01T01%3A00%3A00&subject=${calendarTitle}`,
    icon: Outlook,
  },
  {
    name: 'Fichero .ics',
    url: '/jsconfes.ics',
    icon: Calendar,
  },
]
---

<div class="group relative flex flex-col">
  <Button
    class="rounded-t-md group-hover:rounded-t-md shadow-lg !text-black dark:!text-white"
    style="transparent"
    id="add-to-calendar"
  >
    <Calendar slot="icon-left" class="size-4" />
    Agregalo a tu calendario
  </Button>
  <div
    class="hidden absolute overflow-hidden z-10 rounded-b-md top-full left-0 group-hover:flex group-focus-within:flex flex-col items-center justify-center gap-y-2 w-full bg-zinc-950"
    id="calendar-dialog"
  >
    {
      calendars.map(({ name, url, icon: Icon }) => (
        <a
          href={url}
          class="z-50 w-full flex flex-row justify-start items-center gap-x-4 py-3 px-4 hover:bg-zinc-800"
          target="_blank"
          rel="noopener noreferrer"
        >
          <Icon class="size-4" />
          {name}
        </a>
      ))
    }
  </div>
</div>
