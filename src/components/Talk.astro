---
const { item, showSpeaker = true } = Astro.props
const { time, topic, speaker, role, image, description, language } = item
---

<div
  class="flex justify-between items-center bg-dark-surface/50 p-6 rounded-xl border border-white/5 flex-col md:flex-row gap-6 hover:border-js-yellow/50 transition-all group"
>
  <div
    class="flex gap-6 flex-1 flex-col md:flex-row items-center md:items-start text-center md:text-left"
  >
    <div class="flex flex-col items-center md:items-start min-w-[120px]">
      <span class="text-js-yellow font-mono text-xl tabular-nums leading-none">
        {time.split(' - ')[0]}
      </span>
      <span class="text-gray-500 font-mono text-xs uppercase mt-1">
        {time.split(' - ')[1]}
      </span>
    </div>
    <div class="flex flex-col gap-2">
      <div class="flex items-center gap-3 justify-center md:justify-start">
        <h4
          class="text-2xl font-bold font-display text-white group-hover:text-js-yellow transition-colors leading-tight text-balance"
        >
          {topic}
        </h4>
        {
          language === 'en' && (
            <span class="flex items-center gap-1.5 bg-blue-500/10 text-blue-400 text-[10px] font-bold px-2 py-0.5 rounded-full border border-blue-500/20 uppercase tracking-wider">
              ðŸ‡¬ðŸ‡§ English
            </span>
          )
        }
      </div>
      {
        description && (
          <p class="text-gray-400 text-sm leading-relaxed max-w-[500px] text-balance">
            {description}
          </p>
        )
      }
    </div>
  </div>

  {
    speaker && showSpeaker && (
      <div class="flex items-center w-full md:w-auto mt-4 md:mt-0 bg-black/30 p-4 rounded-lg border border-white/5 min-w-[280px]">
        {
          // Si 'image' existe, revisamos si es un array o un string
          image && Array.isArray(image) ? (
            <div class="flex -space-x-4 mr-4">
              {image.map((img, index) => (
                <img
                  width={56}
                  height={56}
                  src={`/img/${img}`}
                  alt={`Imagen de avatar ${index + 1} de ${speaker}`}
                  class="size-14 rounded-full border-2 border-dark-surface object-cover"
                />
              ))}
            </div>
          ) : image ? (
            <img
              width={56}
              height={56}
              src={`/img/${image}`}
              alt={`Imagen de avatar de ${speaker}`}
              class="size-14 rounded-full mr-4 border-2 border-js-yellow/30 object-cover"
            />
          ) : (
            <div class="size-14 rounded-full mr-4 border-2 border-dashed border-white/20 flex items-center justify-center bg-white/5">
              <i class="fas fa-user text-white/20 text-xl" />
            </div>
          )
        }
        <div class="flex flex-col">
          <p class="font-bold text-white text-lg leading-tight">{speaker}</p>
          <p class="text-js-yellow/80 text-sm leading-tight mt-1 truncate max-w-[180px]">{role}</p>
        </div>
      </div>
    )
  }
</div>
